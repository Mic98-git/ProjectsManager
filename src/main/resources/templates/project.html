<html>
	<head>
		<title>TaskManager</title>
		<link rel="stylesheet" type="text/css" href="../static/css/style.css" th:href="@{/css/style.css}">
	</head>
	
	<body>
		<div th:replace="navbar :: topbar"></div>
		<h2 th:text="${project.name}">...</h2>
		
		<table>
			<tr>
				<td>
					<h3>Description</h3>
				</td>
				<td th:text="${project.description}">...</td>
			</tr>
			<tr>
				<td>
					<h3>Shared with:</h3>
				</td>
				<td>
					<ul>
						<li th:each="member : ${members}">
							<div th:text ="${member.name} + ' ' + ${member.lastName}"></div>
						</li>
					</ul>					
				</td>
			</tr>
			<tr>
				<td><h3>Tasks</h3></td>
				<td>
					<ul>
					<li th:each="task : ${project.projectTasks}">
						<div>
							<a th:href="@{'/projects/' + ${project.id} + '/task/' + ${task.id}}" th:text="${task.name}">...</a>							
						</div>
						<div th:text="${task.description}"></div>
					</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td colspan="2"><a th:href="@{'/projects/' + ${project.id} + '/task/new'}">Create a new Task</a></td>
			</tr>
		</table>

		<table>
			<tr>
				<th>Tag</th>
				<th>Manage members</th>
			</tr>
					<!-- Form per il nuovo tag -->
			<form method="post" th:action="@{'/projects/' + ${project.id} + '/addtag'}" th:object="${tagForm}">
				<table>
                	<tr>
        		  		<td><label>Name</label></td>
        		  		<td><input type="text" th:field="*{name}"></td>
                	</tr>
                	<tr>
        		  		<td><label>Color</label></td>
        		  		<td><input type="text" th:field="*{color}"></td>
                	</tr>
                	<tr>
        		  		<td><label>Description</label></td>
        		  	<td><input type="text" th:field="*{description}"></td>
                	</tr>
        		</table>
        			<input type="submit" value="Add tag">
       		</form>
        	<tr>
					<!-- Form per aggiunta di membri -->
        		<td>
					<form method="post" th:action="@{'/projects/' + ${project.id} + '/members/add'}" th:object="${credentialForm}">
						<label>Choose a member to add</label><br>
						<select th:field="*{userName}">
							<th:block th:each="credential : ${allCredentials}">
								<option th:value="${credential.userName}" 
									th:text="${credential.userName}"></option>				
							</th:block>
						</select><br>

						<input type="submit" name="memberButton" value="Add member">
					</form>
				</td>
			</tr>
		</table>	
	</body>
</html>